<tool name="FixMateInformation" id="picard_FixMateInformation" version="1.121.0">
  <description>ensure that all mate-pair information is in sync between each read and it's mate pair</description>
  <requirements>
    <requirement type="package" version="1.121.0">picard</requirement>
  </requirements>
  
  <macros>
    <import>picard_macros.xml</import>
  </macros>
  
  <command>
    @java_options@
    
    java -jar \$JAVA_JAR_PATH/FixMateInformation.jar 
    INPUT="${inputFile}"
    OUTPUT="${outFile}"
    ASSUME_SORTED=${assume_sorted}
    ADD_MATE_CIGAR=${add_mate_cigar}
    
    SORT_ORDER=coordinate
    VALIDATION_STRINGENCY="${validation_stringency}"
    QUIET=true
    VERBOSITY=ERROR
  
  </command>
  <inputs>
    <param name="inputFile" multiple="True" type="data" format="sam,bam" label="Select BAM dataset or a dataset collection" help="INPUT"/>
    <param name="add_mate_cigar" type="boolean" checked="true" truevalue="True" falsevalue="False" label="Adds the mate CIGAR tag (MC) if true, does not if false" help="ADD_MATE_CIGAR; default=True"/>
    <param name="assume_sorted" type="boolean" truevalue="True" falsevalue="False" label="Assume that the input file is QUERYNAME sorted" help="ASSUME_SORTED; default=False"/>
 
    <expand macro="VS" />
    
  </inputs> 
  
  <outputs>
    <data format="bam" name="outFile" label="${tool.name} on ${on_string}: BAM with fixed mates"/>
  </outputs>
  
  <tests>
    <test>
      <param name="inputFile" value="picard_FixMateInformation.bam" ftype="bam"/>
      <param name="add_mate_cigar" value="True"/>
      <param name="assume_sorted" value="False"/>
      <param name="validation_stringency" value="LENIENT"/>
      <output name="outFile" file="picard_FixMateInformation_test1.bam" ftype="bam" lines_diff="2"/>
    </test>
  </tests>
  
  <stdio>
    <exit_code range="1:"  level="fatal"/>
  </stdio>
  
  <help>

**Purpose**

Computes a number of metrics that are useful for evaluating coverage and performance of whole genome sequencing experiments.

------

.. class:: warningmark

**Warning on using ASSUME_SORTED option**

Datasets imported into Galaxy are automatically coordinate sorted. So use this option (set it to True) only if you are sure that this is necessary. If you are not sure - a good rule of thumb
is to assume that the BAM you are working with is coordinate sorted.

@dataset_collections@

@description@

  ASSUME_SORTED=Boolean
  AS=Boolean                    If true, assume that the input file is queryname sorted, even if the header says 
                                otherwise.  Default value: false. 
  
  ADD_MATE_CIGAR=Boolean
  MC=Boolean                    Adds the mate CIGAR tag (MC) if true, does not if false.  Default value: true. 
  
@more_info@

  </help>
</tool>


